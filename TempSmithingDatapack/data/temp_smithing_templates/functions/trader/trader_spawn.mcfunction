# Debug Info
execute if score DebugInfo TemplateCheck matches 1.. run tellraw @s {"text":"Running trader_spawn function","italic":false}

# Merge villager data to give him the proper data - tags, name and trades
data merge entity @s {Tags:["CustomTrader","SmithingTrader"],ArmorItems:[{},{},{},{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6020}}],CustomNameVisible:0b,CustomName:'{"text":"Smithing Trader","italic":false}',VillagerData:{level:99,profession:"minecraft:toolsmith",type:"minecraft:plains"},Offers:{Recipes:[{rewardExp:1b,maxUses:2147483647,buy:{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6012,BlankArmorTrim:1b,TempArmorTrim:2b,display:{Lore:['{"italic":false,"color":"#A8A8A8","text":"Blank Armor Trim"}','{"text":" "}','{"italic":false,"color":"#A8A8A8","text":"Applies to:"}','{"italic":false,"color":"#5454FC","text":" Armor"}','{"italic":false,"color":"#A8A8A8","text":"Ingredients:"}','{"italic":false,"color":"#5454FC","text":" Ingots & Crystals"}'],Name:'{"italic":false,"text":"Smithing Template"}'}}},buyB:{id:"minecraft:diamond",Count:8b},sell:{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6013,HostArmorTrim:1b,TempArmorTrim:1b,display:{Lore:['{"italic":false,"color":"#A8A8A8","text":"Host Armor Trim"}','{"text":" "}','{"italic":false,"color":"#A8A8A8","text":"Applies to:"}','{"italic":false,"color":"#5454FC","text":" Armor"}','{"italic":false,"color":"#A8A8A8","text":"Ingredients:"}','{"italic":false,"color":"#5454FC","text":" Ingots & Crystals"}'],Name:'{"italic":false,"text":"Smithing Template"}'}}}},{rewardExp:1b,maxUses:2147483647,buy:{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6012,BlankArmorTrim:1b,TempArmorTrim:2b,display:{Lore:['{"italic":false,"color":"#A8A8A8","text":"Blank Armor Trim"}','{"text":" "}','{"italic":false,"color":"#A8A8A8","text":"Applies to:"}','{"italic":false,"color":"#5454FC","text":" Armor"}','{"italic":false,"color":"#A8A8A8","text":"Ingredients:"}','{"italic":false,"color":"#5454FC","text":" Ingots & Crystals"}'],Name:'{"italic":false,"text":"Smithing Template"}'}}},buyB:{id:"minecraft:diamond",Count:8b},sell:{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6014,RaiserArmorTrim:1b,TempArmorTrim:1b,display:{Lore:['{"italic":false,"color":"#A8A8A8","text":"Raiser Armor Trim"}','{"text":" "}','{"italic":false,"color":"#A8A8A8","text":"Applies to:"}','{"italic":false,"color":"#5454FC","text":" Armor"}','{"italic":false,"color":"#A8A8A8","text":"Ingredients:"}','{"italic":false,"color":"#5454FC","text":" Ingots & Crystals"}'],Name:'{"italic":false,"text":"Smithing Template"}'}}}},{rewardExp:1b,maxUses:2147483647,buy:{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6012,BlankArmorTrim:1b,TempArmorTrim:2b,display:{Lore:['{"italic":false,"color":"#A8A8A8","text":"Blank Armor Trim"}','{"text":" "}','{"italic":false,"color":"#A8A8A8","text":"Applies to:"}','{"italic":false,"color":"#5454FC","text":" Armor"}','{"italic":false,"color":"#A8A8A8","text":"Ingredients:"}','{"italic":false,"color":"#5454FC","text":" Ingots & Crystals"}'],Name:'{"italic":false,"text":"Smithing Template"}'}}},buyB:{id:"minecraft:diamond",Count:8b},sell:{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6015,ShaperArmorTrim:1b,TempArmorTrim:1b,display:{Lore:['{"italic":false,"color":"#A8A8A8","text":"Shaper Armor Trim"}','{"text":" "}','{"italic":false,"color":"#A8A8A8","text":"Applies to:"}','{"italic":false,"color":"#5454FC","text":" Armor"}','{"italic":false,"color":"#A8A8A8","text":"Ingredients:"}','{"italic":false,"color":"#5454FC","text":" Ingots & Crystals"}'],Name:'{"italic":false,"text":"Smithing Template"}'}}}},{rewardExp:1b,maxUses:2147483647,buy:{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6012,BlankArmorTrim:1b,TempArmorTrim:2b,display:{Lore:['{"italic":false,"color":"#A8A8A8","text":"Blank Armor Trim"}','{"text":" "}','{"italic":false,"color":"#A8A8A8","text":"Applies to:"}','{"italic":false,"color":"#5454FC","text":" Armor"}','{"italic":false,"color":"#A8A8A8","text":"Ingredients:"}','{"italic":false,"color":"#5454FC","text":" Ingots & Crystals"}'],Name:'{"italic":false,"text":"Smithing Template"}'}}},buyB:{id:"minecraft:diamond",Count:8b},sell:{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6017,WayfinderArmorTrim:1b,TempArmorTrim:1b,display:{Lore:['{"italic":false,"color":"#A8A8A8","text":"Wayfinder Armor Trim"}','{"text":" "}','{"italic":false,"color":"#A8A8A8","text":"Applies to:"}','{"italic":false,"color":"#5454FC","text":" Armor"}','{"italic":false,"color":"#A8A8A8","text":"Ingredients:"}','{"italic":false,"color":"#5454FC","text":" Ingots & Crystals"}'],Name:'{"italic":false,"text":"Smithing Template"}'}}}}]}}

# Kill our Blank Template and Smithing Table
kill @e[type=item,limit=1,sort=nearest,nbt={Item:{id:"minecraft:clock",Count:1b,tag:{CustomModelData:6012,BlankArmorTrim:1b,TempArmorTrim:2b}}}]
kill @e[type=item,limit=1,sort=nearest,nbt={Item:{id:"minecraft:smithing_table",Count:1b,}}]

# Execute function that adds random trades with smithing templates to villager
execute as @s run function temp_smithing_templates:trader/trader_random_trades
